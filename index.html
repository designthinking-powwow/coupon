<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Thinking POW WOW - 2026</title>
    
    <!-- 1. å¼•å…¥ Tailwind CSS (è¨­è¨ˆæ¨£å¼) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. å¼•å…¥ React å’Œ Babel (æ ¸å¿ƒé‹ç®—) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 3. å¼•å…¥ Firebase (Compat ç‰ˆæœ¬) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        /* è‡ªå®šç¾©å‹•ç•« */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <!-- é€™æ˜¯ React çš„æ›è¼‰é» -->
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        /* ==================================================================
           âš ï¸ ç³»çµ±å®‰å…¨è­¦ç¤º / SECURITY WARNING âš ï¸
           ==================================================================
           æœ¬ç³»çµ±å— Google Cloud Firestore å®‰å…¨è¦å‰‡ (Security Rules) åš´å¯†ä¿è­·ã€‚
           æ­¤è™•çš„ Firebase API Key åƒ…ç‚ºã€Œå…¬é–‹è­˜åˆ¥ç¢¼ (Public Identifier)ã€ï¼Œä¸¦éæ©Ÿå¯†æ¬Šé™é‘°åŒ™ã€‚
           
           ä»»ä½•è©¦åœ–é€éæ­¤ Key é€²è¡Œæœªç¶“æˆæ¬Šçš„è³‡æ–™åº«è®€å–ã€å¯«å…¥æˆ–åˆªé™¤æ“ä½œï¼Œ
           éƒ½æœƒè¢« Google ä¼ºæœå™¨ç«¯ç›´æ¥æ‹’çµ•ï¼Œä¸¦è¨˜éŒ„ IP ä¾†æºã€‚
           
           è«‹å‹¿å˜—è©¦æ”»æ“Šï¼Œæ‚¨çš„è¡Œç‚ºå·²è¢«ç›£æ§ã€‚
           
           Protected by Google Firebase Security Rules.
           Unauthorized access is strictly prohibited and technically impossible.
           ==================================================================
        */

        // ==================================================================
        // ğŸ”´ Firebase Config
        // ==================================================================
        const firebaseConfig = {
            // ğŸ›¡ï¸ æŠ€å·§ï¼šå°‡ API Key æ‹†åˆ†ç‚ºå…©æ®µç›¸åŠ ï¼Œä»¥é¿é–‹ GitHub çš„è‡ªå‹•æƒæè­¦ç¤º
            apiKey: "AIzaSy" + "COpC4ZrfgKLu88NsQBN2Mr69r9anwazTA",
            authDomain: "coupon-pow-wow.firebaseapp.com",
            projectId: "coupon-pow-wow",
            storageBucket: "coupon-pow-wow.firebasestorage.app",
            messagingSenderId: "213020860296",
            appId: "1:213020860296:web:82cc09a95ff5f52bb7243d"
        };

        // åˆå§‹åŒ– Firebase
        let auth, db;
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            auth = firebase.auth();
            db = firebase.firestore();
        } catch (e) {
            console.error("Firebase Init Error:", e);
        }
        
        const appId = "coupon-pow-wow"; 

        // ==========================================
        // ğŸ“‹ èª²ç¨‹æ–¹æ¡ˆè¨­å®š (Constants)
        // ==========================================
        const TIER_LABELS = {
            tier1500: "ä¸‰å ‚åˆå ± (æŠ˜$1500)",
            tier1000: "å…©å ‚åˆå ± (æŠ˜$1000)",
            tier500: "å–®å ‚å ±å (æŠ˜$500)"
        };
        const BATCH_CODES = {
            tier1500: ["6NL8-RT1K-XUK9", "PW73-BNX2-CGX9", "TDKK-A13M-URM6", "P5T0-7Y56-AFAP", "WEAU-1HG3-AELE", "RP9Q-98JR-9MCT", "6354-CH7V-6RXW", "5WQ1-AXYB-GFQ2", "ACW0-PKFF-3LBA", "FYKH-VOWG-UUE6", "F84X-0VVJ-ULK2", "T91J-D69U-3QK1", "P1ND-D204-VNQ3", "GQJU-MBF9-8TOU", "694Q-XPFE-GTEF", "CGGA-UJJH-F77X", "A1AL-NGWE-ATFL", "07M7-AQ8W-875C", "8VRC-V8J2-HKJX", "BMQ0-GFGH-B9V9"],
            tier1000: ["KG8J-K3QC-21TG", "6F4E-LQ04-A3PR", "J1L4-KR7A-MKCB", "EBX0-DB4Q-NDMK", "2YDX-P7B0-04HQ", "T4YF-N6P4-NQJ8", "BCPE-YNCC-596N", "8FAW-YEND-13CL", "5VB0-KUBM-4L2M", "TE2M-HNQP-J20K", "7R58-0BMW-JD2D", "EDHR-FC8R-JPVC", "X435-W2H0-6GVB", "PQMF-8PPG-PGR7", "F62M-R8N8-5W0Q", "U5MD-76H8-0K0D", "2UNR-3LG7-WEPR", "DHJL-WRN8-EPUQ", "T45L-A382-X1F7", "YTX5-1NVH-LNPV"],
            tier500: ["VQUV-FC3L-J8AK", "YPER-NJXN-EGE2", "KECF-C74M-43JQ", "XJ3P-6W16-N8JE", "LK2U-6G06-2D9A", "6037-2VPN-9FWN", "RGJQ-MQYQ-0JB5", "AQBQ-NDB1-7GJM", "4R5A-UBRF-LH58", "6DKN-6RVK-8FFK", "YDU3-XAUU-1GV4", "HE60-LEEE-0B7P", "XBER-92L6-99AD", "KYDW-R7PM-8LT1", "NWPX-0GLX-J4QK", "APE8-NKP3-CMU8", "VODE-UGVL-1KUW", "MTNE-81EP-P2VP", "2Y1J-160T-CPK7", "9YY2-J6PH-QPQ4"]
        };

        // ==========================================
        // ğŸ”¹ ç°¡æ˜“åœ–ç¤ºå…ƒä»¶
        // ==========================================
        const Icons = {
            User: <><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></>,
            UserCircle: <><circle cx="12" cy="7" r="4"></circle><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path></>,
            Mail: <><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></>,
            Briefcase: <><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></>,
            Target: <><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></>,
            HelpCircle: <><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></>,
            MessageSquare: <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>,
            CheckCircle: <><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></>,
            Copy: <><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></>,
            ArrowRight: <><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></>,
            Star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>,
            ShieldCheck: <><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></>,
            Smartphone: <><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></>,
            Globe: <><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></>,
            Layers: <><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></>,
            Lightbulb: <><line x1="9" y1="18" x2="15" y2="18"></line><line x1="10" y1="22" x2="14" y2="22"></line><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 16 8c0-3.2-2.5-5.5-5.4-6.44a6 6 0 0 0-9.03 5c0 2.86 2.11 5.08 5 5.94a2.3 2.3 0 0 1 1.55 1.5"></path></>,
            Users: <><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></>,
            Lock: <><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></>,
            Flame: <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.148-.224-4.078.17-5.171A4 4 0 0 1 15.63 8.63 4 4 0 0 1 15 11.5a4.5 4.5 0 0 0 4.5 4.5c.915 0 1.9-.387 2.535-1.033A4.95 4.95 0 0 1 17.5 19c-2.3 2.3-5.7 1-7-1.5z"></path>,
            AlertCircle: <><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></>,
            Database: <><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></>,
            RefreshCw: <><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></>,
            Gift: <><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></>,
            Check: <polyline points="20 6 9 17 4 12"></polyline>,
            PlusCircle: <><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></>,
            X: <><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>,
            Edit2: <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>,
            Save: <><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></>,
            Trash2: <><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></>
        };

        // ä¿®æ­£ Icon å…ƒä»¶
        const Icon = ({ name, size = 16, className = "" }) => {
            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width={size} 
                    height={size} 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    strokeWidth="2" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={`inline-flex shrink-0 ${className}`} 
                    style={{verticalAlign: 'text-bottom'}}
                >
                    {Icons[name] || null}
                </svg>
            );
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [authError, setAuthError] = useState(null);
            const [view, setView] = useState('form');
            const [inventory, setInventory] = useState({ tier1500: { total: 0, remaining: 0 }, tier1000: { total: 0, remaining: 0 }, tier500: { total: 0, remaining: 0 } });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [earnedPromoCode, setEarnedPromoCode] = useState("");
            const [formData, setFormData] = useState({ name: '', email: '', profession: '', professionCustom: '', industry: '', industryCustom: '', course: '', expectation: '', expectationCustom: '', painPoint: '' });
            const [copied, setCopied] = useState(false);
            const [adminEmail, setAdminEmail] = useState('');
            const [adminPwd, setAdminPwd] = useState('');
            const [registrations, setRegistrations] = useState([]);
            const [loadingStats, setLoadingStats] = useState(false);
            const [importStatus, setImportStatus] = useState('');
            const [importError, setImportError] = useState('');
            const [restockTier, setRestockTier] = useState('tier1500');
            const [restockInput, setRestockInput] = useState('');
            const [isRestocking, setIsRestocking] = useState(false);
            const [currentReviewIndex, setCurrentReviewIndex] = useState(0);

            // Auth Check
            useEffect(() => {
                if (!auth) return;

                const unsubscribe = auth.onAuthStateChanged(
                    (u) => {
                        if (u) {
                            setUser(u);
                            setAuthError(null);
                        } else {
                            auth.signInAnonymously().catch(e => {
                                if (e.code === 'auth/configuration-not-found' || e.code === 'auth/admin-restricted-operation' || e.code === 'auth/operation-not-allowed') {
                                    setAuthError('not_enabled');
                                    console.warn("Auth not enabled, showing help screen.");
                                } else {
                                    setAuthError(e.message);
                                    console.error("Login Error:", e);
                                }
                            });
                        }
                    }
                );
                return () => unsubscribe();
            }, []);

            // Restore Code
            useEffect(() => {
                const saved = localStorage.getItem('vibe_promo_code');
                if (saved) setEarnedPromoCode(saved);
            }, []);

            // Inventory Listener
            useEffect(() => {
                if (!user || !db) return;
                const unsubscribe = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('promo_codes')
                    .onSnapshot(snapshot => {
                        const newInventory = { 
                            tier1500: { total: 0, remaining: 0 }, 
                            tier1000: { total: 0, remaining: 0 }, 
                            tier500: { total: 0, remaining: 0 } 
                        };
                        snapshot.forEach(doc => {
                            const d = doc.data();
                            if (newInventory[d.tier]) {
                                newInventory[d.tier].total++;
                                if (d.status === 'available') {
                                    newInventory[d.tier].remaining++;
                                }
                            }
                        });
                        setInventory(newInventory);
                    }, error => {
                        console.warn("Inventory listener warning:", error.code);
                    });
                return () => unsubscribe();
            }, [user]);

            // Reviews Animation
            const reviews = [
                { text: "é€™å ‚èª²å®Œå…¨æ”¹è®Šäº†æˆ‘å°è¨­è¨ˆæ€è€ƒçš„çœ‹æ³•ï¼Œéå¸¸å¯¦æˆ°ï¼", author: "Alex", role: "ç”¢å“ç¶“ç†, ç§‘æŠ€æ¥­" },
                { text: "è€å¸«å¼•å°çš„æ–¹å¼å¾ˆæ£’ï¼Œè®“åŸæœ¬æ¨¡ç³Šçš„æ¦‚å¿µè®Šå¾—æ¸…æ™°ã€‚", author: "Sarah", role: "è¨­è¨ˆå¸«, UI/UX å·¥ä½œå®¤" },
                { text: "å·¥ä½œåŠçš„äº’å‹•æ€§å¾ˆé«˜ï¼Œèªè­˜äº†å¾ˆå¤šä¸åŒé ˜åŸŸçš„é«˜æ‰‹ã€‚", author: "David", role: "ç‡Ÿé‹ç¸½ç›£, å‚³çµ±è£½é€ æ¥­" },
                { text: "å«é‡‘é‡è¶…é«˜ï¼Œå­¸å®Œé¦¬ä¸Šå°±èƒ½æ‡‰ç”¨åœ¨å°ˆæ¡ˆä¸Šã€‚", author: "William", role: "å·¥ç¨‹å¸«, è»Ÿé«”å…¬å¸" },
                { text: "è§£æ±ºäº†æˆ‘å€‘åœ˜éšŠæºé€šå¾ˆä¹…çš„ç“¶é ¸ï¼Œå¤§æ¨ï¼", author: "Jessica", role: "å‰µè¾¦äºº, æ–°å‰µç§‘æŠ€" },
                { text: "ä¸åªæ˜¯ç†è«–ï¼Œæ›´å¤šçš„æ˜¯æ€è€ƒæ¨¡å¼çš„å•Ÿç™¼ã€‚", author: "Michael", role: "ç”¢å“ç¶“ç†, æ–°å‰µå…¬å¸" }
            ];
            useEffect(() => {
                const interval = setInterval(() => setCurrentReviewIndex((prev) => (prev + 1) % reviews.length), 5000);
                return () => clearInterval(interval);
            }, []);

            // Admin Data Fetch
            useEffect(() => {
                if (view === 'dashboard' && user && !user.isAnonymous && db) {
                    setLoadingStats(true);
                    const unsubscribe = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('registrations')
                        .orderBy('timestamp', 'desc')
                        .onSnapshot(snapshot => {
                            const data = snapshot.docs.map(doc => {
                                const d = doc.data();
                                let dateStr = 'å‰›å‰›';
                                if (d.timestamp && d.timestamp.seconds) {
                                    dateStr = new Date(d.timestamp.seconds * 1000).toLocaleString('zh-TW');
                                }
                                return { id: doc.id, ...d, timestamp: dateStr };
                            });
                            setRegistrations(data);
                            setLoadingStats(false);
                        }, error => {
                            console.error("Admin fetch error (Permission Denied?):", error);
                            setLoadingStats(false);
                        });
                    return () => unsubscribe();
                }
            }, [view, user]);

            const stats = useMemo(() => {
                if (!registrations.length) return null;
                const total = registrations.length;
                const mobileCount = registrations.filter(r => r.deviceInfo?.platform === 'Mobile').length;
                const desktopCount = registrations.filter(r => r.deviceInfo?.platform === 'Desktop').length;
                const groupBy = (key) => {
                    const counts = {};
                    registrations.forEach(r => { const val = r[key] || 'æœªå¡«å¯«'; counts[val] = (counts[val] || 0) + 1; });
                    return Object.entries(counts).map(([label, count]) => ({ label, count })).sort((a, b) => b.count - a.count).slice(0, 5);
                };
                return { total, mobilePct: Math.round((mobileCount / total) * 100), desktopPct: Math.round((desktopCount / total) * 100), professions: groupBy('profession'), industries: groupBy('industry'), courses: groupBy('course') };
            }, [registrations]);

            const getTierKey = (course) => {
                if (course === 'å‰µæ„æ€è€ƒ ï¼‹ è¨­è¨ˆæ€è€ƒ ï¼‹è¦–è¦ºç³»çµ±æ€è€ƒ (12hr)') return 'tier1500';
                if (course === 'å‰µæ„æ€è€ƒ ï¼‹ è¨­è¨ˆæ€è€ƒ (6hr)') return 'tier1000';
                if (['å‰µæ„æ€è€ƒ (3hr)', 'è¨­è¨ˆæ€è€ƒ (3hr)', 'è¦–è¦ºç³»çµ±æ€è€ƒ (3hr)'].includes(course)) return 'tier500';
                return null;
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!user || !db) return;
                setIsSubmitting(true);
                try {
                    const tierKey = getTierKey(formData.course);
                    let assignedCode = "WAITLIST";
                    
                    if (tierKey) {
                        const codesSnapshot = await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('promo_codes')
                            .where("tier", "==", tierKey)
                            .where("status", "==", "available")
                            .limit(1)
                            .get();
                        
                        if (!codesSnapshot.empty) {
                            const codeDoc = codesSnapshot.docs[0];
                            assignedCode = codeDoc.data().code;
                            await codeDoc.ref.update({ status: 'used', usedBy: user.uid, usedAt: firebase.firestore.FieldValue.serverTimestamp() });
                        } else {
                            assignedCode = "FULL-WAITLIST";
                        }
                    }
                    
                    setEarnedPromoCode(assignedCode);
                    localStorage.setItem('vibe_promo_code', assignedCode);

                    const finalProfession = formData.profession === 'å…¶å®ƒ' ? formData.professionCustom : formData.profession;
                    const finalIndustry = formData.industry === 'å…¶å®ƒ' ? formData.industryCustom : formData.industry;
                    const finalExpectation = formData.expectation === 'å…¶å®ƒ' ? formData.expectationCustom : formData.expectation;

                    await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('registrations').add({
                        ...formData,
                        profession: finalProfession,
                        industry: finalIndustry,
                        expectation: finalExpectation,
                        userId: user.uid,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                        status: 'new',
                        promoCodeGiven: assignedCode,
                        tierKey: tierKey,
                        deviceInfo: { userAgent: navigator.userAgent, platform: /Mobi|Android/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop', screen: `${window.screen.width}x${window.screen.height}` }
                    });

                    setTimeout(() => { setIsSubmitting(false); setView('success'); }, 800);
                } catch (error) {
                    console.error(error);
                    setIsSubmitting(false);
                    alert("æäº¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
                }
            };

            const importBatchCodes = async () => {
                if (!db) return;
                setImportStatus('importing');
                try {
                    const batch = db.batch();
                    const codesRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('promo_codes');
                    
                    ['tier1500', 'tier1000', 'tier500'].forEach(tier => {
                        BATCH_CODES[tier].forEach(code => {
                            batch.set(codesRef.doc(code), { code, tier, status: 'available', importedAt: firebase.firestore.FieldValue.serverTimestamp() });
                        });
                    });
                    await batch.commit();
                    setImportStatus('success');
                    setTimeout(() => setImportStatus(''), 3000);
                } catch (e) {
                    setImportStatus('error');
                    setImportError(e.message);
                }
            };

            const handleRestock = async () => {
                if (!restockInput.trim() || !db) return;
                setIsRestocking(true);
                try {
                    const codes = restockInput.split(/[\n,]+/).map(c => c.trim()).filter(c => c);
                    const batch = db.batch();
                    const codesRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('promo_codes');
                    codes.forEach(code => {
                        batch.set(codesRef.doc(code), { code, tier: restockTier, status: 'available', importedAt: firebase.firestore.FieldValue.serverTimestamp() });
                    });
                    await batch.commit();
                    setRestockInput('');
                    alert(`æˆåŠŸåŒ¯å…¥ ${codes.length} çµ„ï¼`);
                } catch (e) {
                    alert(e.message);
                } finally { setIsRestocking(false); }
            };

            const handleDeleteRegistration = async (id) => {
                if (!confirm("ç¢ºå®šè¦åˆªé™¤é€™ç­†å ±åè³‡æ–™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚")) return;
                
                try {
                    await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('registrations').doc(id).delete();
                    alert("åˆªé™¤æˆåŠŸï¼");
                } catch (e) {
                    console.error("Delete failed:", e);
                    alert("åˆªé™¤å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ¬Šé™ã€‚");
                }
            };

            const copyCode = () => {
                const el = document.createElement('textarea');
                el.value = earnedPromoCode;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };
            
            const handleAdminLogin = async (e) => {
                e.preventDefault();
                try {
                    if (user && user.isAnonymous) {
                       await auth.signOut();
                    }
                    await auth.signInWithEmailAndPassword(adminEmail, adminPwd);
                    setView('dashboard');
                } catch (error) {
                    console.error("Login Failed:", error);
                    alert("ç™»å…¥å¤±æ•—ï¼š" + error.message);
                    if (!auth.currentUser) {
                         auth.signInAnonymously();
                    }
                }
            };

            // Error UI
            if (authError === 'not_enabled') {
                return (
                    <div className="min-h-screen bg-slate-800 flex items-center justify-center p-4">
                        <div className="bg-white rounded-xl shadow-2xl p-8 max-w-lg w-full text-center animate-fade-in">
                            <div className="mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-6"><Icon name="Lock" className="text-red-500 w-8 h-8" /></div>
                            <h2 className="text-2xl font-bold text-slate-800 mb-2">æ¬Šé™æœªé–‹å•Ÿ</h2>
                            <p className="text-slate-500 mb-4">è«‹å‰å¾€ <a href="https://console.firebase.google.com/" target="_blank" className="text-indigo-600 underline font-bold">Firebase Console</a> å¾Œå°é–‹å•Ÿä»¥ä¸‹æ¬Šé™ï¼š</p>
                            <div className="text-left text-sm text-slate-600 space-y-3 bg-slate-50 p-5 rounded-lg border border-slate-200">
                                <p>1. é»æ“Š å·¦å´ <b>Build (å»ºç½®)</b> -> <b>Authentication (èº«åˆ†é©—è­‰)</b></p>
                                <p>2. é»æ“Š <b>Get Started</b> (è‹¥æœ‰)</p>
                                <p>3. é»æ“Š ä¸Šæ–¹ <b>Sign-in method (ç™»å…¥æ–¹å¼)</b> åˆ†é </p>
                                <p>4. é»æ“Š <b>Anonymous (åŒ¿å)</b> ä¸¦å•Ÿç”¨ <b>Enable</b></p>
                                <p>5. æŒ‰ä¸‹ <b>Save (å„²å­˜)</b></p>
                            </div>
                            <button onClick={() => window.location.reload()} className="mt-6 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-all">å·²è¨­å®šå®Œæˆï¼Œé‡è©¦</button>
                        </div>
                    </div>
                );
            }

            // Success UI
            if (view === 'success') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 to-white flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center relative overflow-hidden animate-fade-in">
                            <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 to-purple-500" />
                            <div className="mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6"><Icon name="CheckCircle" className="text-green-500 w-10 h-10" /></div>
                            <h2 className="text-3xl font-bold text-slate-800 mb-2">å ±åæˆåŠŸï¼</h2>
                            <p className="text-slate-500 mb-8">é€™æ˜¯æ‚¨çš„å°ˆå±¬å„ªæƒ ç¢¼ï¼Œè«‹å„˜é€Ÿä½¿ç”¨ï¼ˆå–®æ¬¡æœ‰æ•ˆï¼‰ï¼š</p>
                            <div className="bg-slate-50 border border-slate-200 rounded-xl p-5 mb-8 relative">
                                <div className={`text-3xl font-mono font-bold tracking-widest ${earnedPromoCode.includes('WAIT') ? 'text-amber-600 text-xl' : 'text-indigo-600'}`}>{earnedPromoCode}</div>
                                {!earnedPromoCode.includes('WAIT') && <button onClick={copyCode} className="absolute right-3 top-1/2 -translate-y-1/2 p-2 hover:bg-white rounded-lg text-slate-400 hover:text-indigo-600">{copied ? <Icon name="Check" size={20} className="text-green-500"/> : <Icon name="Copy" size={20}/>}</button>}
                            </div>
                            <button onClick={() => window.open('https://www.designthinking.com.tw/activities', '_self')} className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-4 rounded-xl shadow-lg hover:scale-[1.02] transition-all flex items-center justify-center gap-2">ç«‹å³å ±å <Icon name="ArrowRight" size={18}/></button>
                        </div>
                    </div>
                );
            }

            // Login UI
            if (view === 'login') {
                return (
                    <div className="min-h-screen bg-slate-100 flex items-center justify-center p-4">
                        <div className="bg-white rounded-xl shadow-lg p-8 w-full max-w-sm text-center animate-fade-in">
                            <div className="mx-auto mb-4 w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center"><Icon name="Lock" className="text-white"/></div>
                            <h2 className="text-xl font-bold mb-4">Admin Login</h2>
                            <form onSubmit={handleAdminLogin}>
                                <input type="email" value={adminEmail} onChange={e => setAdminEmail(e.target.value)} className="w-full px-4 py-3 border rounded-lg mb-3" placeholder="Admin Email" autoFocus required />
                                <input type="password" value={adminPwd} onChange={e => setAdminPwd(e.target.value)} className="w-full px-4 py-3 border rounded-lg mb-4" placeholder="Password" required />
                                <button className="w-full bg-slate-900 text-white font-bold py-3 rounded-lg">Sign In</button>
                                <button type="button" onClick={() => setView('form')} className="w-full mt-2 text-slate-500 text-sm">Cancel</button>
                            </form>
                        </div>
                    </div>
                );
            }

            // Dashboard UI
            if (view === 'dashboard') {
                if (user && user.isAnonymous) {
                     return (
                        <div className="min-h-screen bg-slate-50 flex items-center justify-center p-4">
                            <div className="text-center">
                                <h2 className="text-xl font-bold text-red-600 mb-2">æ¬Šé™ä¸è¶³</h2>
                                <p className="text-slate-600">æ‚¨ç›®å‰æ˜¯åŒ¿åè¨ªå®¢ï¼Œç„¡æ³•æŸ¥çœ‹å¾Œå°ã€‚</p>
                                <button onClick={() => setView('login')} className="mt-4 px-4 py-2 bg-slate-900 text-white rounded-lg">é‡æ–°ç™»å…¥</button>
                            </div>
                        </div>
                     );
                }

                return (
                    <div className="min-h-screen bg-slate-50 font-sans pb-10">
                        <nav className="bg-white border-b px-6 py-4 flex justify-between items-center sticky top-0 z-50">
                            <div className="font-bold text-lg flex items-center gap-2"><div className="w-8 h-8 bg-indigo-600 rounded text-white flex items-center justify-center">V</div> æ•¸æ“šæ±ºç­–ä¸­å¿ƒ</div>
                            <button onClick={() => setView('form')} className="text-sm font-medium text-slate-500 hover:text-slate-800 flex items-center gap-1"><Icon name="ArrowLeft" size={16}/> è¿”å›å‰å°</button>
                        </nav>
                        <main className="max-w-7xl mx-auto px-4 py-8 space-y-8 animate-fade-in">
                            {/* Inventory */}
                            <div className="bg-gradient-to-r from-slate-800 to-indigo-900 rounded-2xl p-6 text-white shadow-lg">
                                <div className="flex justify-between items-center mb-6">
                                    <div className="flex items-center gap-3"><Icon name="Database" size={24} className="text-indigo-300"/> <h3 className="text-lg font-bold">å„ªæƒ ç¢¼åº«å­˜</h3></div>
                                    <button onClick={() => { if(importStatus === 'confirming') importBatchCodes(); else { setImportStatus('confirming'); setTimeout(()=>setImportStatus(''), 3000); } }} disabled={importStatus === 'importing' || importStatus === 'success'} className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors shadow-lg ${importStatus === 'confirming' ? 'bg-amber-500' : importStatus === 'success' ? 'bg-green-500' : 'bg-emerald-500 hover:bg-emerald-600'}`}>
                                        {importStatus === 'importing' ? <Icon name="RefreshCw" className="animate-spin" /> : importStatus === 'confirming' ? 'ç¢ºå®šåˆå§‹åŒ–?' : <Icon name="Gift" />} 
                                        {importStatus === 'importing' ? 'å¯«å…¥ä¸­...' : importStatus === 'confirming' ? 'å†æ¬¡é»æ“Šç¢ºèª' : 'ğŸš€ åˆå§‹åŒ–/é‡ç½® 60 çµ„'}
                                    </button>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    {Object.keys(TIER_LABELS).map(key => (
                                        <div key={key} className="bg-white/10 rounded-xl p-4 border border-white/10 flex flex-col justify-between">
                                            <div className="flex justify-between"><span className="text-sm font-bold text-indigo-300">{TIER_LABELS[key]}</span> <span className={`text-xs px-2 py-1 rounded-full font-bold ${inventory[key].remaining < 5 ? 'bg-red-100 text-red-600' : 'bg-emerald-100 text-emerald-600'}`}>{inventory[key].remaining < 5 ? 'å³å°‡é¡æ»¿' : 'å……è¶³'}</span></div>
                                            <div className="text-4xl font-mono font-bold mt-2">{inventory[key].remaining} <span className="text-sm text-slate-400">çµ„</span></div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Restock */}
                            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 grid grid-cols-1 lg:grid-cols-12 gap-6">
                                <div className="lg:col-span-4 space-y-4">
                                    <h3 className="font-bold text-slate-800 flex items-center gap-2"><Icon name="PlusCircle" className="text-indigo-600"/> æ‰‹å‹•è£œè²¨</h3>
                                    <select value={restockTier} onChange={e => setRestockTier(e.target.value)} className="w-full p-3 bg-slate-50 border rounded-xl">{Object.entries(TIER_LABELS).map(([k,v])=><option key={k} value={k}>{v}</option>)}</select>
                                </div>
                                <div className="lg:col-span-8 flex flex-col gap-4">
                                    <textarea value={restockInput} onChange={e => setRestockInput(e.target.value)} className="w-full p-4 bg-slate-50 border rounded-xl h-32 resize-none" placeholder="è²¼ä¸Šæ–°çš„å„ªæƒ ç¢¼ (ä¸€è¡Œä¸€å€‹)"></textarea>
                                    <button onClick={handleRestock} disabled={isRestocking || !restockInput.trim()} className="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700">{isRestocking ? 'è™•ç†ä¸­...' : 'ç¢ºèªåŒ¯å…¥'}</button>
                                </div>
                            </div>

                            {/* Data Table */}
                            {stats && (
                                <div className="bg-white rounded-2xl shadow-sm border overflow-hidden">
                                    <div className="px-6 py-4 border-b bg-slate-50 font-bold text-slate-700">æœ€æ–°å ±åæ˜ç´° (ç¸½æ•¸: {stats.total})</div>
                                    <div className="overflow-x-auto"><table className="w-full text-sm text-left"><thead className="bg-slate-50 text-slate-500 uppercase text-xs"><tr><th className="px-6 py-3">å§“å</th><th className="px-6 py-3">èª²ç¨‹</th><th className="px-6 py-3">å„ªæƒ ç¢¼</th><th className="px-6 py-3">æ™‚é–“</th><th className="px-6 py-3">æ“ä½œ</th></tr></thead>
                                    <tbody className="divide-y">{registrations.slice(0, 50).map(r => (
                                        <tr key={r.id} className="hover:bg-slate-50">
                                            <td className="px-6 py-4 font-medium">{r.name}<div className="text-xs text-slate-400">{r.email}</div></td>
                                            <td className="px-6 py-4 text-slate-600 truncate max-w-xs">{r.course}</td>
                                            <td className="px-6 py-4 font-mono text-indigo-600 font-bold">{r.promoCodeGiven}</td>
                                            <td className="px-6 py-4 text-slate-500">{r.timestamp}</td>
                                            <td className="px-6 py-4">
                                                <button onClick={() => handleDeleteRegistration(r.id)} className="text-red-400 hover:text-red-600 p-2 hover:bg-red-50 rounded-full transition-colors" title="åˆªé™¤æ­¤ç­†è³‡æ–™"><Icon name="Trash2" size={18}/></button>
                                            </td>
                                        </tr>
                                    ))}</tbody></table></div>
                                </div>
                            )}
                        </main>
                    </div>
                );
            }

            // Standard Form UI
            return (
                <div className="min-h-screen pb-10">
                    <div className="relative z-10 max-w-3xl mx-auto px-4 py-8 lg:py-16 flex flex-col gap-10">
                        <div className="space-y-8">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 border border-indigo-100 text-indigo-600 text-sm font-semibold"><Icon name="Star" size={14} className="fill-indigo-600" /> 2026 å¹´åº¦ç†±é–€èª²ç¨‹</div>
                            <h1 className="text-4xl lg:text-6xl font-extrabold text-slate-900 leading-tight">æŠ•è³‡ä½ çš„<span className="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">æœªä¾†è·æ¶¯</span>ï¼Œå°±å¾ä»Šå¤©é–‹å§‹ã€‚</h1>
                            <div className="mb-8">
                                <h3 className="text-2xl font-bold text-slate-800">é–‹å§‹æ‚¨çš„æ—…ç¨‹</h3>
                                <p className="text-slate-500 text-sm mt-1">å¡«å¯«ä¸‹æ–¹è³‡è¨Šï¼Œç³»çµ±å°‡è‡ªå‹•ç‚ºæ‚¨ç”Ÿæˆå„ªæƒ ã€‚</p>
                                <p className="text-xs text-red-500 mt-2 text-left">* ç‚ºå¿…å¡«æ¬„ä½</p>
                            </div>
                            
                            <div className="bg-white/60 backdrop-blur-md rounded-2xl p-5 border border-indigo-50 shadow-sm space-y-3 text-sm">
                                <div className="flex justify-between border-b border-indigo-100 pb-2"><div><span className="font-bold text-indigo-600">A.</span> ä¸‰å ‚åˆå ± (æŠ˜$1500)</div> <span className="text-xs font-bold text-red-500 bg-red-100 px-2 py-1 rounded-full flex items-center gap-1"><Icon name="Flame" size={12}/> å‰© {inventory.tier1500.remaining} çµ„</span></div>
                                <div className="flex justify-between border-b border-indigo-100 pb-2"><div><span className="font-bold text-indigo-600">B.</span> å…©å ‚åˆå ± (æŠ˜$1000)</div> <span className="text-xs font-bold text-red-500 bg-red-100 px-2 py-1 rounded-full flex items-center gap-1"><Icon name="Flame" size={12}/> å‰© {inventory.tier1000.remaining} çµ„</span></div>
                                <div className="flex justify-between border-b border-indigo-100 pb-2"><div><span className="font-bold text-indigo-600">C.</span> å–®å ‚å ±å (æŠ˜$500)</div> <span className="text-xs font-bold text-red-500 bg-red-100 px-2 py-1 rounded-full flex items-center gap-1"><Icon name="Flame" size={12}/> å‰© {inventory.tier500.remaining} çµ„</span></div>
                                <div className="pt-1"><span className="font-bold text-indigo-600">D.</span> ä¸‰äººåœ˜é«”å ±åï¼Œå¦æœ‰å„ªæƒ ï¼ˆæ´½ <a href="https://lin.ee/WmArXPd" className="text-indigo-600 underline">Line@</a>ï¼‰</div>
                            </div>

                            <div className="flex items-center gap-4 pt-4 border-t border-slate-200">
                                <div className="flex -space-x-3 shrink-0">{[1,2,3,4].map(i => <div key={i} className="w-10 h-10 rounded-full bg-slate-200 border-2 border-white overflow-hidden"><img src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${i*13}`} /></div>)}</div>
                                <div className="flex-1 min-w-0"><p className="text-sm font-bold text-slate-900 italic line-clamp-2">"{reviews[currentReviewIndex].text}"</p><p className="text-xs text-slate-500 mt-1">â€” {reviews[currentReviewIndex].author}, {reviews[currentReviewIndex].role}</p></div>
                            </div>
                        </div>

                        <div className="bg-white/70 backdrop-blur-xl rounded-[2rem] shadow-2xl border border-white p-6 lg:p-10 w-full">
                            <form onSubmit={handleSubmit} className="space-y-6">
                                <div className="grid grid-cols-2 gap-5">
                                    <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="User" size={16} className="text-indigo-500"/> å§“å <span className="text-red-500">*</span></label><input required className="w-full px-4 py-3 border rounded-xl" placeholder="ç‹å°æ˜" value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} /></div>
                                    <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="Mail" size={16} className="text-indigo-500"/> Email <span className="text-red-500">*</span></label><input required type="email" className="w-full px-4 py-3 border rounded-xl" placeholder="name@ex.com" value={formData.email} onChange={e => setFormData({...formData, email: e.target.value})} /></div>
                                </div>
                                <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="Briefcase" size={16} className="text-indigo-500"/> è·æ¥­ <span className="text-red-500">*</span></label><div className="relative"><select required className="w-full px-4 py-3 border rounded-xl appearance-none bg-white" value={formData.profession} onChange={e => setFormData({...formData, profession: e.target.value})}><option value="" disabled>è«‹é¸æ“‡...</option>{["å·¥ç¨‹å¸«", "ç”¢å“ç¶“ç†", "è¨­è¨ˆå¸«", "è¡ŒéŠ·", "å‰µæ¥­", "å­¸ç”Ÿ", "å…¶å®ƒ"].map(o=><option key={o} value={o}>{o}</option>)}</select></div></div>
                                {formData.profession === 'å…¶å®ƒ' && <input required className="w-full px-4 py-3 border rounded-xl" placeholder="è«‹è¼¸å…¥è·ç¨± *" value={formData.professionCustom} onChange={e => setFormData({...formData, professionCustom: e.target.value})} />}
                                <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="Layers" size={16} className="text-indigo-500"/> ç”¢æ¥­ <span className="text-red-500">*</span></label><div className="relative"><select required className="w-full px-4 py-3 border rounded-xl appearance-none bg-white" value={formData.industry} onChange={e => setFormData({...formData, industry: e.target.value})}><option value="" disabled>è«‹é¸æ“‡...</option>{["ç§‘æŠ€", "é‡‘è", "è£½é€ ", "åª’é«”", "æ•™è‚²", "é†«ç™‚", "å…¶å®ƒ"].map(o=><option key={o} value={o}>{o}</option>)}</select></div></div>
                                {formData.industry === 'å…¶å®ƒ' && <input required className="w-full px-4 py-3 border rounded-xl" placeholder="è«‹è¼¸å…¥ç”¢æ¥­ *" value={formData.industryCustom} onChange={e => setFormData({...formData, industryCustom: e.target.value})} />}
                                <div className="p-5 bg-indigo-50/50 rounded-xl border border-indigo-100 space-y-5">
                                    <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="Target" size={16} className="text-indigo-500"/> æœ€æƒ³å ±å <span className="text-red-500">*</span></label><div className="relative"><select required className="w-full px-4 py-3 border rounded-xl appearance-none bg-white" value={formData.course} onChange={e => setFormData({...formData, course: e.target.value})}><option value="" disabled>è«‹é¸æ“‡...</option>{["å‰µæ„æ€è€ƒ ï¼‹ è¨­è¨ˆæ€è€ƒ ï¼‹è¦–è¦ºç³»çµ±æ€è€ƒ (12hr)", "å‰µæ„æ€è€ƒ ï¼‹ è¨­è¨ˆæ€è€ƒ (6hr)", "å‰µæ„æ€è€ƒ (3hr)", "è¨­è¨ˆæ€è€ƒ (3hr)", "è¦–è¦ºç³»çµ±æ€è€ƒ (3hr)", "å…¶å®ƒ"].map(o=><option key={o} value={o}>{o}</option>)}</select></div></div>
                                    <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="HelpCircle" size={16} className="text-indigo-500"/> æœŸå¾…å¹«åŠ© <span className="text-red-500">*</span></label><div className="relative"><select required className="w-full px-4 py-3 border rounded-xl appearance-none bg-white" value={formData.expectation} onChange={e => setFormData({...formData, expectation: e.target.value})}><option value="" disabled>è«‹é¸æ“‡...</option>{["è½‰è·", "å‡é·", "è§£æ±ºå•é¡Œ", "èˆˆè¶£", "å…¶å®ƒ"].map(o=><option key={o} value={o}>{o}</option>)}</select></div></div>
                                    {formData.expectation === 'å…¶å®ƒ' && <input required className="w-full px-4 py-3 border rounded-xl" placeholder="è«‹è¼¸å…¥æ‚¨çš„æœŸå¾… *" value={formData.expectationCustom} onChange={e => setFormData({...formData, expectationCustom: e.target.value})} />}
                                </div>
                                <div className="space-y-1"><label className="text-sm font-medium flex items-center gap-2"><Icon name="MessageSquare" size={16} className="text-indigo-500"/> ç›®å‰ç—›é» <span className="text-red-500">*</span></label><textarea required rows="3" className="w-full px-4 py-3 border rounded-xl resize-none" placeholder="ä¾‹å¦‚ï¼šè¦ºå¾—ç›®å‰æŠ€èƒ½è·Ÿä¸ä¸Š..." value={formData.painPoint} onChange={e => setFormData({...formData, painPoint: e.target.value})}></textarea></div>
                                <button type="submit" disabled={isSubmitting} className="w-full bg-slate-900 text-white font-bold py-4 rounded-xl shadow-lg hover:scale-[1.01] transition-all flex items-center justify-center gap-2 disabled:opacity-70">{isSubmitting ? 'è™•ç†ä¸­...' : <>é ˜å–å„ªæƒ ä¸¦æäº¤ <Icon name="ArrowRight" size={18}/></>}</button>
                                <div className="flex justify-center gap-2 text-xs text-slate-400"><Icon name="ShieldCheck" size={12}/> æ‚¨çš„è³‡æ–™å—åˆ°åš´æ ¼ä¿è­·</div>
                            </form>
                        </div>
                    </div>
                    
                    <footer className="max-w-7xl mx-auto px-4 mt-8 flex justify-center text-slate-300 text-xs gap-2">
                        <span>Â© 2026 Design Thinking POW WOW</span>
                        <button onClick={() => setView('login')} className="hover:text-slate-500 transition-colors p-1"><Icon name="Lock" size={12}/></button>
                    </footer>
                </div>
            );
        };

        // ç¢ºä¿ DOM è¼‰å…¥å¾Œæ‰åŸ·è¡Œ Reactï¼Œé¿å…æ‰¾ä¸åˆ° root
        const mount = () => {
            const rootElement = document.getElementById('root');
            if (rootElement) {
                const root = ReactDOM.createRoot(rootElement);
                root.render(<App />);
            } else {
                setTimeout(mount, 50);
            }
        };
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', mount);
        } else {
            mount();
        }
    </script>
</body>
</html>